<!DOCTYPE html>
<html>
<head>
    <title>Verify Location & Selfie</title>
</head>
<body>
    <h2>Take Selfie & Share Location</h2>

    <button id="getLocation">Get Location</button>
    <p id="location"></p>

    <video id="video" width="300" autoplay></video><br>
    <button id="takePhoto">Take Selfie</button>
    <canvas id="canvas" width="300" height="300"></canvas>

    <script>
        // Get Location
        document.getElementById("getLocation").onclick = function () {
            navigator.geolocation.getCurrentPosition(function (pos) {
                document.getElementById("location").innerHTML =
                    "Lat: " + pos.coords.latitude + "<br>Lon: " + pos.coords.longitude;
            });
        };

        // Start Camera
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => {
                document.getElementById("video").srcObject = stream;
            });

        // Take Photo
        document.getElementById("takePhoto").onclick = function () {
            let video = document.getElementById("video");
            let canvas = document.getElementById("canvas");
            canvas.getContext('2d').drawImage(video, 0, 0, 300, 300);

            let imageData = canvas.toDataURL("image/png");
            console.log("Selfie Image:", imageData);

            // TODO: Send to server using AJAX
        };
    </script>
</body>
</html>
